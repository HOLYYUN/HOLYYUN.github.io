
<!DOCTYPE html>
<html lang="zh-Hans" class="loading">
<head><meta name="generator" content="Hexo 3.8.0">
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Docker常用命令记录 - 云</title>
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="google" content="notranslate">
    <meta name="keywords" content="Holyyun,"> 
    <meta name="description" content="命令查看当前服务器所有容器信息docker ps -a
docker构建镜像，-t打印日志到终端docker bulid -t 名称：tag 目录
docker tag $镜像ID或者镜像名称 12,"> 
    <meta name="author" content="Yun"> 
    <link rel="alternative" href="atom.xml" title="云" type="application/atom+xml"> 
    <link rel="icon" href="/img/favicon.png"> 
    <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.css">
    <link rel="stylesheet" href="/css/diaspora.css">
    <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <script>
         (adsbygoogle = window.adsbygoogle || []).push({
              google_ad_client: "ca-pub-8691406134231910",
              enable_page_level_ads: true
         });
    </script>
    <script async custom-element="amp-auto-ads" src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
    </script>
</head>
</html>
<body class="loading">
    <span id="config-title" style="display:none">云</span>
    <div id="loader"></div>
    <div id="single">
    <div id="top" style="display: block;">
    <div class="bar" style="width: 0;"></div>
    <a class="icon-home image-icon" href="javascript:;" data-url="https://holyyun.github.io"></a>
    <div title="播放/暂停" class="icon-play"></div>
    <h3 class="subtitle">Docker常用命令记录</h3>
    <div class="social">
        <!--<div class="like-icon">-->
            <!--<a href="javascript:;" class="likeThis active"><span class="icon-like"></span><span class="count">76</span></a>-->
        <!--</div>-->
        <div>
            <div class="share">
                <a title="获取二维码" class="icon-scan" href="javascript:;"></a>
            </div>
            <div id="qr"></div>
        </div>
    </div>
    <div class="scrollbar"></div>
</div>

    <div class="section">
        <div class="article">
    <div class="main">
        <h1 class="title">Docker常用命令记录</h1>
        <div class="stuff">
            <span>五月 23, 2019</span>
            
  <ul class="post-tags-list"><li class="post-tags-list-item"><a class="post-tags-list-link" href="/tags/技术/">--技术</a></li></ul>


        </div>
        <div class="content markdown">
            <h3 id="命令"><a href="#命令" class="headerlink" title="命令"></a>命令</h3><h4 id="查看当前服务器所有容器信息"><a href="#查看当前服务器所有容器信息" class="headerlink" title="查看当前服务器所有容器信息"></a>查看当前服务器所有容器信息</h4><pre><code>docker ps -a
</code></pre><h4 id="docker构建镜像，-t打印日志到终端"><a href="#docker构建镜像，-t打印日志到终端" class="headerlink" title="docker构建镜像，-t打印日志到终端"></a>docker构建镜像，-t打印日志到终端</h4><pre><code>docker bulid -t 名称：tag 目录
docker tag $镜像ID或者镜像名称 127.0.0.1/docker-imager/ubuntu:14.04  #（打标记）
docker  push  127.0.0.1/docker-imager/ubuntu:14.0
</code></pre><h4 id="运行一个docker容器"><a href="#运行一个docker容器" class="headerlink" title="运行一个docker容器"></a>运行一个docker容器</h4><pre><code>docker run -it 名称
</code></pre><h4 id="删除一个docker容器"><a href="#删除一个docker容器" class="headerlink" title="删除一个docker容器"></a>删除一个docker容器</h4><pre><code>docker -rm 名称/id
</code></pre><h4 id="启动一个nginx-docker-并绑定port"><a href="#启动一个nginx-docker-并绑定port" class="headerlink" title="启动一个nginx docker 并绑定port"></a>启动一个nginx docker 并绑定port</h4><pre><code>docker run --name webservice -d -p 80:80 nginx
</code></pre><h4 id="进入启动的docker容器-bash进入交互式shell环境"><a href="#进入启动的docker容器-bash进入交互式shell环境" class="headerlink" title="进入启动的docker容器 bash进入交互式shell环境"></a>进入启动的docker容器 bash进入交互式shell环境</h4><pre><code>docker exec -it dockerID bash
</code></pre><ul>
<li>-it:这是两个参数，一个是-i：交互式操作，一个是-t终端。我们这里打算进入 bash 执行一些命令并查看返回结果，因此我们需要交互式终端。 </li>
<li>–rm：这个参数是说容器退出后随之将其删除。默认情况下，为了排障需求，退出的容器并不会立即删除，除非手动 docker rm。我们这里只是随便执行个命令，看看结果，不需要排障和保留结果，因此使用 –rm 可以避免浪费空间。</li>
<li>bash：放在镜像名后的是命令，这里我们希望有个交互式 Shell，因此用的是 bash。</li>
</ul>
<h4 id="将容器制作镜像"><a href="#将容器制作镜像" class="headerlink" title="将容器制作镜像"></a>将容器制作镜像</h4><pre><code>docker commit -m &apos;Add a new  file&apos;  -a &apos;dongbo&apos; 容器id 镜像名称：tag
</code></pre><h4 id="存储镜像为1个tar包"><a href="#存储镜像为1个tar包" class="headerlink" title="存储镜像为1个tar包"></a>存储镜像为1个tar包</h4><pre><code>docker save -o myubuntu_14.04.tar  myubuntu:14.04
</code></pre><h4 id="载入镜像"><a href="#载入镜像" class="headerlink" title="载入镜像"></a>载入镜像</h4><pre><code>docker load --input myubuntu_14.04.tar
</code></pre><h4 id="将容器导出"><a href="#将容器导出" class="headerlink" title="将容器导出"></a>将容器导出</h4><pre><code>docker export -o timer_docker.tar 容器id
</code></pre><h4 id="导入容器-导入的容器会变成1个镜像"><a href="#导入容器-导入的容器会变成1个镜像" class="headerlink" title="导入容器,导入的容器会变成1个镜像"></a>导入容器,导入的容器会变成1个镜像</h4><pre><code>docker export -o timer_docker.tar f20e52f1b593
</code></pre><p>docker import 和docker load的区别<br>docker load是导入镜像到本地镜像库，docker import 导入一个容器快照到本地镜像库，容器快照将丢弃所有的历史记录和元数据信息，镜像存储会保存完整记录，体积也更大</p>
<h4 id="在docker-hub中查询ubuntu镜像"><a href="#在docker-hub中查询ubuntu镜像" class="headerlink" title="在docker hub中查询ubuntu镜像"></a>在docker hub中查询ubuntu镜像</h4><pre><code>docker search -s 5 ubuntu
</code></pre><p>-s 指定星级，星级越高，镜像越好 5表示只查询5星以上的ubuntu镜像</p>
<h4 id="挂载主机上的-data-docker目录到-opt-webapp下"><a href="#挂载主机上的-data-docker目录到-opt-webapp下" class="headerlink" title="挂载主机上的/data/docker目录到/opt/webapp下"></a>挂载主机上的/data/docker目录到/opt/webapp下</h4><pre><code>docker run -d -p 8080:8080  --name test-volums -v /data/docker:/opt/webapp myubuntu:14.04
</code></pre><h4 id="创建1个数据卷容器"><a href="#创建1个数据卷容器" class="headerlink" title="创建1个数据卷容器"></a>创建1个数据卷容器</h4><pre><code>docker run -it -v /dbdata --name dbdata myubuntu:14.04
</code></pre><h4 id="挂载数据卷容器"><a href="#挂载数据卷容器" class="headerlink" title="挂载数据卷容器"></a>挂载数据卷容器</h4><pre><code>docker run -it --volumes-from dbdata --name db2 myubuntu:14.04
</code></pre><h4 id="查询5星以上的spark镜像，星级越高，镜像越好"><a href="#查询5星以上的spark镜像，星级越高，镜像越好" class="headerlink" title="查询5星以上的spark镜像，星级越高，镜像越好"></a>查询5星以上的spark镜像，星级越高，镜像越好</h4><pre><code>docker search -s 5  spark
</code></pre><h4 id="批量停止docker-容器-慎用！！"><a href="#批量停止docker-容器-慎用！！" class="headerlink" title="批量停止docker 容器,慎用！！"></a>批量停止docker 容器,慎用！！</h4><pre><code>docker stop $(docker ps -q)
</code></pre><h4 id="批量删除docker-容器-慎用！！"><a href="#批量删除docker-容器-慎用！！" class="headerlink" title="批量删除docker 容器,慎用！！"></a>批量删除docker 容器,慎用！！</h4><pre><code>docker rm $(docker ps -qa)
</code></pre><h4 id="批量删除docker镜像-慎用！！"><a href="#批量删除docker镜像-慎用！！" class="headerlink" title="批量删除docker镜像,慎用！！"></a>批量删除docker镜像,慎用！！</h4><pre><code>docker rmi $(docker images -qa)
</code></pre><h4 id="停止一个docker-容器"><a href="#停止一个docker-容器" class="headerlink" title="停止一个docker 容器"></a>停止一个docker 容器</h4><pre><code>docker stop dockerID
</code></pre><h4 id="开始一个docker容器"><a href="#开始一个docker容器" class="headerlink" title="开始一个docker容器"></a>开始一个docker容器</h4><pre><code>docker start dockerID
</code></pre><h5 id="拷贝本地数据到docker容器中"><a href="#拷贝本地数据到docker容器中" class="headerlink" title="拷贝本地数据到docker容器中"></a>拷贝本地数据到docker容器中</h5><pre><code>docker cp containerId:/path/xxx /host/path/target/xxx

docker cp /host/path/target/xxx containerId:/path/xxx
</code></pre><h4 id="查询日志"><a href="#查询日志" class="headerlink" title="查询日志"></a>查询日志</h4><pre><code>sudo docker logs -f containerId
</code></pre><p><a href="https://dongbo0737.github.io/2017/06/29/docker-command/" target="_blank" rel="noopener">原文链接</a></p>

            <!--[if lt IE 9]><script>document.createElement('audio');</script><![endif]-->
            <audio id="audio" loop="1" preload="auto" controls="controls" data-autoplay="false">
                <source type="audio/mpeg" src="http://holyyun.github.io/2019/05/23/Docker常用命令记录/噩梦惊醒之后.mp3">
            </audio>
            
        </div>
        
    <div id="gitalk-container" class="comment link" data-ae="false" data-ci="88869fdd1a73a6dc3222" data-cs="b67753c1277ad9f4b63ac920209fa2cb4865c6c6" data-r="BlogGiTalk" data-o="HOLYYUN" data-a="HOLYYUN" data-d="false">查看评论</div>


    </div>
    
</div>


    </div>
</div>
</body>
<script src="//cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js"></script>
<script src="//lib.baomitu.com/jquery/1.8.3/jquery.min.js"></script>
<script src="/js/plugin.js"></script>
<script src="/js/diaspora.js"></script>
<link rel="stylesheet" href="/photoswipe/photoswipe.css">
<link rel="stylesheet" href="/photoswipe/default-skin/default-skin.css">
<script src="/photoswipe/photoswipe.min.js"></script>
<script src="/photoswipe/photoswipe-ui-default.min.js"></script>

<!-- Root element of PhotoSwipe. Must have class pswp. -->
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">
    <!-- Background of PhotoSwipe. 
         It's a separate element as animating opacity is faster than rgba(). -->
    <div class="pswp__bg"></div>
    <!-- Slides wrapper with overflow:hidden. -->
    <div class="pswp__scroll-wrap">
        <!-- Container that holds slides. 
            PhotoSwipe keeps only 3 of them in the DOM to save memory.
            Don't modify these 3 pswp__item elements, data is added later on. -->
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>
        <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
        <div class="pswp__ui pswp__ui--hidden">
            <div class="pswp__top-bar">
                <!--  Controls are self-explanatory. Order can be changed. -->
                <div class="pswp__counter"></div>
                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
                <button class="pswp__button pswp__button--share" title="Share"></button>
                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>
                <!-- Preloader demo http://codepen.io/dimsemenov/pen/yyBWoR -->
                <!-- element will get class pswp__preloader--active when preloader is running -->
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                      <div class="pswp__preloader__cut">
                        <div class="pswp__preloader__donut"></div>
                      </div>
                    </div>
                </div>
            </div>
            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div> 
            </div>
            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>
            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>
            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>
        </div>
    </div>
</div>




</html>
